(()=>{"use strict";var e={7418:e=>{var t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},a=0;a<10;a++)t["_"+String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,o){for(var i,l,r=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),s=1;s<arguments.length;s++){for(var c in i=Object(arguments[s]))a.call(i,c)&&(r[c]=i[c]);if(t){l=t(i);for(var u=0;u<l.length;u++)n.call(i,l[u])&&(r[l[u]]=i[l[u]])}}return r}}},t={};function a(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,a),i.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};(()=>{a.r(n),a.d(n,{initDemoImport:()=>j,initSiteWizard:()=>_e});const e=window.lodash;let t={},o={};const i="NOT_INSTALLED",l=e=>t=e,r=()=>{var e;return(null===(e=o)||void 0===e?void 0:e.plugins)||[]},s=a=>{const n=(0,e.find)(t.demos,{slug:a});o=n},c=()=>t.ajax_nonce,u=()=>t.ajax_url,d=e=>{var a;return(null===(a=t.texts)||void 0===a?void 0:a[e])||""},m=e=>t.plugins_states[e]||i,p=window.jQuery,b=window.wp.i18n,g=window.wp.url,w=t=>new Promise(((a,n)=>{const o=t instanceof window.FormData?t:new window.FormData;o.append("nonce",c()),(0,e.each)(t,((e,t)=>o.append(t,e))),p.ajax({method:"POST",url:(0,g.addQueryArgs)(u(),{nonce:c(),action:o.get("action")}),data:o,contentType:!1,processData:!1}).done((e=>{if(!1===e.success){var t,o;const a=(null==e||null===(t=e.data)||void 0===t?void 0:t.error_message)||(null==e||null===(o=e.data)||void 0===o?void 0:o.error);n(a)}else a(e)})).fail((e=>{n(`${e.status} ( ${e.statusText} ) : ${e.responseText}`)}))})),f=async e=>await w({action:"kubio-demo-site-activate-plugin",slug:e}),h=async e=>{const t=m(e);try{switch(t){case"ACTIVE":return!0;case"INSTALLED":await f(e);break;case i:await(async e=>await w({action:"kubio-demo-site-install-plugin",slug:e}))(e),await f(e)}}catch(e){throw e}},k=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a={action:"kubio-demo-site-import-data",slug:o.slug||0,first_call:!0};try{let n={};do{if(t&&a.first_call?((0,e.each)(a,((e,a)=>t.append(a,e))),n=await w(t)):n=await w(a),a=(0,e.omit)(a,"first_call"),n.before_import_action?(O(N.PREPARING,C.PROGRESS),a={...a,before_import_action:n.before_import_action}):(O(N.PREPARING,C.DONE),O(N.CONTENT,C.PROGRESS),a=(0,e.omit)(a,"before_import_action")),"finished"===n.status){O(N.CONTENT,C.DONE);break}}while("requires-new-ajax-call"===n.status)}catch(e){P(e)}};let _=0;const y=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const a=p("#kubio-templates-list"),n=p("#kubio-template-installing");if(e){_=window.scrollY,a.hide(),n.css("display","flex").hide().fadeIn(100),n.find("img").attr("src",o.thumb);const e=(0,b.sprintf)(d("importing_template"),o.name);n.find("[data-title]").html(e);const i=r(),l=n.find("[data-plugins]"),s=n.find("[data-plugins-list]");i.length?(l.show(),s.empty(),i.forEach((e=>{const a=(n=e.slug,t.texts.plugins_states[m(n)]);var n;s.append(`<li><span>${e.label}</span><span>${a}</span></li>`)}))):l.hide();const c=!o.is_pro;(e=>{const t=p("#kubio-template-installing"),a=t.find("#import-button"),n=t.find("[data-available-pro-only]"),o=t.find("[data-check-pro-features]");e?(n.addClass("hidden"),o.addClass("hidden"),a.attr("data-start-import",""),a.show()):(a.removeAttr("data-start-import"),a.hide(),n.removeClass("hidden"),o.removeClass("hidden"))})(!(!t.kubio_pro_active&&!c))}else n.css("display","flex").hide(),p("#kubio-templates-list").show(),setTimeout((()=>window.scrollTo(0,_)),5)},E=async()=>{p(".kubio-admin-page-header-start-editing").addClass("hidden");const e=p("#kubio-template-installing"),t=e.find("[data-info]"),a=e.find("[data-progress]"),n=e.find("[data-install-buttons]"),o=e.find("[data-install-success-buttons]"),i=p(".kubio-progress-bar");t.hide(),a.css("display","flex").show(),n.hide(),i.show();try{await(async()=>{try{O(N.PLUGINS,C.PROGRESS);const e=r();for(let t=0;t<e.length;t++){const{slug:a}=e[t];await h(a)}O(N.PLUGINS,C.DONE)}catch(e){P(e)}})(),await k()}catch(e){P()}i.hide(),o.show(),p(".kubio-admin-page-header-start-editing").removeClass("hidden")},v=()=>{p((()=>{!function(){try{const e=new URL(location).searchParams.get("import");if(!e)return;s(e),y(),E()}catch(e){console.error(e)}}(),p(document).on("click","#kubio-templates-list button[data-slug]",(function(){const e=p(this).data("slug");s(e),y()})),p(document).on("click","#kubio-template-installing button[data-cancel-import]",(function(){y(!1)})),p(document).on("click","#kubio-template-installing button[data-start-import]",E),p(document).on("submit","#kubio-import-demo-site",(async e=>{e.preventDefault(),e.stopPropagation();const t=e.target,a=new window.FormData(t);S=!0;const n=p(t).siblings(".kubio-progress-bar");n.show(),p(t).hide();try{await k(a)}catch(e){n.hide();const t=x(e);p("[data-kubio-manual-demo-site-errors]").append(`<div class="kubio-demo-site-manual-import-error">${t}</div>`)}n.hide()}))}))},N={PLUGINS:"plugins",PREPARING:"preparing",CONTENT:"content"},I={plugins:"data-installing-plugins",preparing:"data-preparing-for-import",content:"data-importing-content"},C={INACTIVE:"",PROGRESS:"progress",DONE:"active"},O=(e,t)=>{p(`[data-progress-list] [${I[e]}]`).attr("class",t)};let S=!1;const x=t=>{t=(0,e.castArray)(t);let a="";return t.forEach((e=>a+=`<p>${e}</p>`)),a},A=t=>{if(S)return;const a="[data-importing-errors]";p(a).show(),(t=(0,e.castArray)(t)).forEach((e=>p(`${a} [data-importing-errors-content]`).append(`<p>${e}</p>`)))},P=e=>{throw S||(A(e),A(d("import_stopped")),S=!0),p(".kubio-progress-bar").hide(),p("[data-progress-list] li").attr("class",""),e},j=e=>{l(e),v()},R=p("#upgrade_to_pro_wrapper #kubio-page-builder-activate-license-form");let L=R;const T=p(".notice #kubio-page-builder-activate-license-form");T.length&&(L=T);const D=p("#kubio-page-builder-check-license form");if(D.length&&(L=D),L.length){const Ee=L.find("input[type=text]"),ve=L.parent(),Ne=ve.find("#kubio-page-builder-activate-license-message"),Ie=ve.find(".description"),Ce=ve.find(".spinner-holder");function Oe(e){const t=jQuery(document.createElement("div")).append(e);return t.find("input,button,script,style").remove(),t.find("body").length?t.find("body").html():t.html()}function Se(){Ne.hide()}function xe(e){Pe(),Ne.attr("class","message error-message"),Ne.html(Oe(e)),Ne.show()}function Ae(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";L.hide(),Ne.hide(),Ie.hide(),Ce.show(),""!==e&&("loader"===e?(Ce.removeClass("ok"),Ce.find(".icon .loader").show()):"ok"===e&&Ce.addClass("ok")),""!==t&&Ce.find(".message").text(t)}function Pe(){L.show(),Ne.show(),Ie.show(),Ce.hide()}Ee.on("keyup change",Se),L.on("submit",(function(e){e.preventDefault(),e.stopPropagation();const t=Ee.val();t?(Se(),Ae("loader",(0,b.__)("Loading…","kubio")),L.addClass("disabled"),wp.ajax.send("kubiowp-page-builder-activate",{data:{key:t}}).done((function(e){R.length?(Ae("loader",(0,b.__)("Installing Kubio PRO…","kubio")),wp.ajax.post("kubiowp-page-builder-maybe-install-pro").done((function(){Ae("ok",(0,b.__)("Kubio PRO sucessfully installed","kubio")),F(t)})).fail((function(e){e.message?xe(e.message):xe((0,b.__)("There was an error installing the Kubio PRO plugin","kubio"))}))):Ae("ok",e||(0,b.__)("Activated successfully","kubio"))})).fail((function(e){Pe(),L.removeClass("disabled"),xe(e.responseJSON.data)}))):xe((0,b.__)("License key is empty","kubio"))})),D.length&&window.wp&&window.wp.ajax&&wp.ajax.send("kubiowp-page-builder-check-license").fail((function(e){L.closest(".notice").removeClass("hidden"),xe(Oe(e.responseJSON.data))}))}function F(e){p(".kubio--modal").removeClass("kubio--modal-hidden"),p("input[name=upgrade__reason]").on("click",(function(){p(".kubio--popup__form label").removeClass("kubio--popup__form--checked"),p(this).parents("label").addClass("kubio--popup__form--checked"),0===p("input[name=upgrade__reason]:checked").length?p(".kubio--popup__form").addClass("kubio--popup__form-has-errors"):(p(".kubio--popup__form").removeClass("kubio--popup__form-has-errors"),p(".kubio--modal").addClass("kubio--modal-hidden"),function(e,t){wp.ajax.send("kubiowp-page-builder-upgrade-feedback",{data:{reason:e,license:t}}).done((function(){console.log("Thank you for your feedback")}))}(p("input[name=upgrade__reason]:checked").val(),e))}))}p(".kubio--popup__close button").on("click",(function(e){e.preventDefault(),p(this).parents(".kubio--modal").addClass("kubio--modal-hidden")})),window.kubio=window.kubio||{},window.kubio.showFeedbackForm=F;const $=window.wp.element,G=window.kubio.ai,K=window.kubio.core,M=window.kubio.coreHooks,B=window.kubio.log,U=window.kubio.pro,q=window.kubio.utils,z=window.React;var W=a.n(z),H=a(7418),Q=a.n(H),V=function(){return V=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},V.apply(this,arguments)};const Y=function(e){for(var t=e.url,a=e.allowFullScreen,n=e.position,o=e.display,i=e.height,l=e.width,r=e.overflow,s=e.styles,c=e.onLoad,u=e.onMouseOver,d=e.onMouseOut,m=e.scrolling,p=e.id,b=e.frameBorder,g=e.ariaHidden,w=e.sandbox,f=e.allow,h=e.className,k=e.title,_=e.ariaLabel,y=e.ariaLabelledby,E=e.name,v=e.target,N=e.loading,I=e.importance,C=e.referrerpolicy,O=e.allowpaymentrequest,S=e.src,x=Q()({src:S||t,target:v||null,style:{position:n||null,display:o||"block",overflow:r||null},scrolling:m||null,allowpaymentrequest:O||null,importance:I||null,sandbox:w||null,loading:N||null,styles:s||null,name:E||null,className:h||null,referrerpolicy:C||null,title:k||null,allow:f||null,id:p||null,"aria-labelledby":y||null,"aria-hidden":g||null,"aria-label":_||null,width:l||null,height:i||null,onLoad:c||null,onMouseOver:u||null,onMouseOut:d||null}),A=Object.create(null),P=0,j=Object.keys(x);P<j.length;P++){var R=j[P];null!=x[R]&&(A[R]=x[R])}for(var L=0,T=Object.keys(A.style);L<T.length;L++){var D=T[L];null==A.style[D]&&delete A.style[D]}if(a)if("allow"in A){var F=A.allow.replace("fullscreen","");A.allow=("fullscreen "+F.trim()).trim()}else A.allow="fullscreen";return b>=0&&(A.style.hasOwnProperty("border")||(A.style.border=b)),W().createElement("iframe",V({},A))};let J="",X=()=>(0,q.getBackendData)("kubioAIPricingURL");X=U.upgradeToProURL;const Z=(0,$.memo)((e=>{let{message:t}=e;return(0,$.createElement)("p",{className:"spinner-holder"},(0,$.createElement)("span",{className:"loader",dangerouslySetInnerHTML:{__html:J}}),t)})),ee=e=>{let{message:t}=e;return(0,$.createElement)("div",{className:"notice notice-error"},(0,$.createElement)("p",null,t))},te=e=>{let{remainingCredits:t,email:a}=e;const[n,o]=(0,$.useState)(1),[i,l]=(0,$.useState)(!0),[r,s]=(0,$.useState)({data:[]});let c=(0,$.createElement)($.Fragment,null);return(0,M.useEffectAsync)((async()=>{try{l(!0);const e=await(0,G.getAIUsage)(n);s(e)}catch(e){}finally{l(!1)}}),[n]),(0,$.createElement)($.Fragment,null,(0,$.createElement)("div",{className:"kubio-admin-row kubio-ai-account-info nowrap"},(0,$.createElement)("div",{className:"kubio-admin-col grow"},(0,$.createElement)("h3",null,(0,b.__)("You are connected to Kubio AI","kubio")),(0,$.createElement)("p",{dangerouslySetInnerHTML:{__html:(0,b.sprintf)(// translators: placeholders are for email and number of credits
(0,b.__)("You are currently connected as %1$s, and the current account has %2$s AI credits available","kubio"),`<i class="kubio-ai-email">${a}</i>`,`<i class="kubio-ai-credits">${t}</i>`)}})),(0,$.createElement)("div",{className:"kubio-admin-col kubio-ai-info-actions"},(0,$.createElement)("a",{href:X(),target:"_blank",className:"button button-primary button-hero",rel:"noreferrer"},(0,b.__)("Get more credits","kubio")),c)),(0,$.createElement)("hr",null),(0,$.createElement)("div",{className:"kubio-admin-row kubio-ai-account-usage"},(0,$.createElement)("div",{className:"kubio-admin-row kubio-ai-account-info"},(0,$.createElement)("div",{className:"kubio-admin-col grow"},(0,$.createElement)("h3",null,(0,b.__)("Kubio AI credits usage","kubio")),(0,$.createElement)("p",null,(0,b.__)("The table below displays how Kubio AI credits were spent on this site","kubio")))),(0,$.createElement)("table",{className:"wp-list-table widefat fixed striped table-view-list pages"},(0,$.createElement)("thead",null,(0,$.createElement)("tr",null,(0,$.createElement)("th",{scope:"col",className:"manage-column r"},(0,b.__)("Date","kubio")),(0,$.createElement)("th",{scope:"col",className:"manage-column r"},(0,b.__)("Message","kubio")))),(0,$.createElement)("tbody",null,i&&(0,$.createElement)("tr",null,(0,$.createElement)("td",{className:"no-data",colSpan:2},(0,$.createElement)(Z,{message:(0,b.__)("Retrieving data…","kubio")}))),!i&&0===r.data.length&&(0,$.createElement)("tr",null,(0,$.createElement)("td",{className:"no-data",colSpan:2},(0,$.createElement)("p",null,(0,b.__)("Currently there is no usage history for this site","kubio")))),!i&&0!==r.data.length&&r.data.map((e=>(0,$.createElement)("tr",{key:e.created_at},(0,$.createElement)("td",null,e.created_at),(0,$.createElement)("td",null,e.content)))))),(0,$.createElement)("div",{className:"tablenav bottom"},(0,$.createElement)("div",{className:"tablenav-pages"},(0,$.createElement)("span",{className:"displaying-num"},(0,b.sprintf)(// translators: %s number of items
(0,b._n)("%s item","%s items",r.total,"kubio"),r.total)),(0,$.createElement)("span",{className:"pagination-links"},(0,$.createElement)("button",{className:"first-page button","aria-hidden":"true",onClick:()=>o(1),disabled:1===n},(0,$.createElement)("span",{"aria-hidden":"true"},"«")),(0,$.createElement)("button",{className:"prev-page button","aria-hidden":"true",disabled:1===n,onClick:()=>o((e=>Math.max(1,e-1)))},(0,$.createElement)("span",{"aria-hidden":"true"},"‹")),(0,$.createElement)("span",{className:"paging-input"},(0,$.createElement)("span",{className:"tablenav-paging-text"},(0,b.sprintf)(// translators: the restult will be like 1 of 4
(0,b.__)("%1$s of %2$s","kubio"),n,r.last_page))),(0,$.createElement)("button",{className:"next-page button",disabled:n===r.last_page,onClick:()=>o((e=>Math.min(r.last_page,e+1)))},(0,$.createElement)("span",{"aria-hidden":"true"},"›")),(0,$.createElement)("button",{className:"last-page button",disabled:n===r.last_page,onClick:()=>o(r.last_page)},(0,$.createElement)("span",{"aria-hidden":"true"},"»")))))))},ae=()=>{const t=(0,e.first)((0,q.getBackendData)("kubioCloudUrl").split("?")).replace(/\/+$/,"");return(0,$.useEffect)((()=>{const e=t=>{const{action:a=null,value:n=null,error:o=null}=t.data||{};"ai_subscription_key"===a&&(window.removeEventListener("message",e),o&&B.Log.error("AI Connect Iframe",o),n||B.Log.error("AI Connect Iframe, no value"),(async()=>{await(0,G.setAIKey)({aiKey:n}),window.location.reload()})())};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}}),[]),(0,$.createElement)("div",{className:"kubio-admin-row kubio-ai-account-info"},(0,$.createElement)("div",{className:"kubio-admin-col"},(0,$.createElement)("h2",null,(0,b.__)("You are not connected to Kubio AI","kubio")),(0,$.createElement)("p",null,(0,b.__)("It appears that you haven't fully leveraged the potential of Kubio AI features on your website. By connecting and allowing the AI to assist you, you'll optimize its capabilities and enhance your overall experience. Let the AI do the heavy lifting for you—seamless and efficient.","kubio"))),(0,$.createElement)("div",{className:"kubio-admin-col kubio-ai-info-actions kubio-ai-info-actions__login"},(0,$.createElement)(Y,{loading:"eager",importance:"high",className:"kubio-connect-iframe",url:`${t}/ui-route/connect-ai`,title:"Kubio AI Connect",sandbox:"allow-popups allow-modals allow-same-origin allow-scripts allow-forms allow-popups-to-escape-sandbox"})))};window.aiInfoInit=function(e){J=e.loader_iframe,e.connected?async function(){try{const{remaining_credits:e=0,account_email:t=30}=await(0,G.getAIInfo)();(0,K.reactRender)((0,$.createElement)(te,{remainingCredits:e,email:t}),document.querySelector("#kubio-ai-info-content"))}catch(e){(0,K.reactRender)((0,$.createElement)(ee,{message:(0,b.__)("There seems to be an error with the Kubio AI service. Please try again","kubio")}),document.querySelector("#kubio-ai-info-content"))}}():(0,K.reactRender)((0,$.createElement)(ae,null),document.querySelector("#kubio-ai-info-content"))};const ne=window.kubio.blockPatterns,oe=window.kubio.editor,ie=window.kubio.icons,le=window.wp.components,re=window.wp.coreData,se=window.wp.data,ce=window.wp.apiFetch;var ue=a.n(ce);const de=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};await ue()({path:(0,g.addQueryArgs)("kubio/v1/3rd_party_themes/import_fresh_site",e)})},me=window.kubio.controls,pe=window.wp.primitives,be=(0,$.createElement)(pe.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,$.createElement)(pe.Path,{d:"M13 11.8l6.1-6.3-1-1-6.1 6.2-6.1-6.2-1 1 6.1 6.3-6.5 6.7 1 1 6.5-6.6 6.5 6.6 1-1z"})),ge=(0,$.createElement)(pe.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,$.createElement)(pe.Path,{d:"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z"})),we=async()=>{await de({start_with_frontpage:!0}),window.location=(0,q.getBackendData)("kubioEditorURL")},fe=e=>{let{onCancel:t}=e;const{nextStep:a}=(0,me.useWizard)();return(0,$.createElement)("div",{className:"kubio-ai-welcome-step kubio-ai-starter-step"},(0,$.createElement)("div",{className:"kubio-ai-welcome-step__content"},(0,$.createElement)("div",{className:"kubio-ai-welcome-step__close-modal"},(0,$.createElement)(le.Button,{icon:be,onClick:t})),(0,$.createElement)(le.Flex,null,(0,$.createElement)(le.FlexBlock,{className:"kubio-ai-welcome-step__content-column"},(0,$.createElement)("div",{className:"kubio-ai-welcome-step__content-column__content"},(0,$.createElement)(le.Icon,{icon:ie.KubioAI,className:"kubio-ai-logo-colored kubio-ai-logo-animated"}),(0,$.createElement)("h2",null,(0,b.__)("Thanks for choosing Kubio!","kubio")),(0,$.createElement)("h1",null,(0,b.__)("Would you like to generate a homepage using AI? It's fast and FREE!","kubio")),(0,$.createElement)("p",null,(0,b.__)("Kubio uses an AI page generator to create a homepage that is adapted to your website. Here’s what you’ll get:","kubio")),(0,$.createElement)("ul",null,(0,$.createElement)("li",null,(0,$.createElement)(le.Icon,{icon:ge}),(0,b.__)("A homepage customized for your website","kubio")),(0,$.createElement)("li",null,(0,$.createElement)(le.Icon,{icon:ge}),(0,b.__)("Texts and images based on your website subject","kubio")),(0,$.createElement)("li",null,(0,$.createElement)(le.Icon,{icon:ge}),(0,b.__)("Matching color scheme and typography","kubio")),(0,$.createElement)("li",null,(0,$.createElement)(le.Icon,{icon:ge}),(0,b.__)("Contact form and social media integration","kubio"))),(0,$.createElement)(le.Flex,{justify:"flex-start",gap:4},(0,$.createElement)(le.Button,{variant:"primary",onClick:a,className:"kubio-ai-button"},(0,b.__)("Generate homepage with AI","kubio")),(0,$.createElement)(le.Button,{variant:"link",onClick:we},(0,b.__)("No thanks, install the default homepage","kubio"))))),(0,$.createElement)(le.Flex,{className:"kubio-ai-welcome-step__bg-column"},(0,$.createElement)("img",{alt:"welcome",src:(0,q.staticAssetURL)("ai-assets/welcome.png")})))))},he=()=>{window.location=(0,q.getBackendData)("admin_url")},ke=()=>{const[e,t]=(0,$.useState)(!1),{saveEditedEntityRecord:a}=(0,se.useDispatch)(re.store),{dirtyEntityRecords:n}=(0,se.useSelect)((e=>{const t=e(re.store).__experimentalGetDirtyEntityRecords().filter((e=>!("root"===e.kind&&"site"===e.name))),a=e(re.store).getEntityRecordEdits("root","site"),n=[];for(const e in a)n.push({kind:"root",name:"site",property:e});return{dirtyEntityRecords:[...t,...n]}}),[]);(0,ne.useInitializeCloudPatterns)();const o=(0,$.useCallback)((e=>[{label:(0,b.__)("Welcome","kubio"),name:"start",component:fe,skipNavigation:!0},...e.filter((e=>["general-info","contact-info","final-step"].includes(e.name)))]),[]),i=(0,$.useCallback)((async e=>{const{siteContext:o}=e;t(!0),await de(),await(0,G.saveAiGeneralSettings)(o);for(const e of n)await a(e.kind,e.name,e.key);window.location=(0,g.addQueryArgs)((0,q.getBackendData)("kubioEditorURL"),{"generate-ai-frontpage":!0})}),[n,a]);return(0,$.createElement)($.Fragment,null,e&&(0,$.createElement)("div",{className:"kubio-starter-loader"},(0,$.createElement)("div",{className:"kubio-starter-loader_content-wrapper"},(0,$.createElement)(le.Icon,{icon:ie.KubioLoader}),(0,$.createElement)("p",null,(0,b.__)("Finishing setup…","kubio")))),!e&&(0,$.createElement)(G.AIWizard,{isSetup:!1,isFrontPage:!0,stepsFilter:o,startStep:"start",modalTitle:(0,b.__)("Kubio Website starter","kubio"),finishLabel:(0,b.__)("Generate","kubio"),onCancel:he,onFinish:i}))},_e=async function(){(0,oe.registerEditSiteStore)({}),(0,K.reactRender)((0,$.createElement)($.StrictMode,null,(0,$.createElement)(ke,null)),document.querySelector("#kubio-website-starter"))},ye=p("#adminmenu .toplevel_page_kubio");if(ye.length){const je=window.location.search,Re=new URLSearchParams(je);if("kubio-get-started"===Re.get("page")){const Le=Re.get("tab");null!==Le&&(ye.find("li.current").removeClass("current"),ye.find("a[href*='tab="+Le+"']").length?ye.find("a[href*='tab="+Le+"']").closest("li").addClass("current"):ye.find("li.wp-first-item").next().addClass("current"))}ye.find("a[href*='tab=pro-upgrade']").length&&ye.find("a[href*='tab=pro-upgrade']").closest("li").addClass("li-pro-upgrade")}setTimeout((()=>{const e=p(".kubio-admin-row.get-started-imported");e.addClass("inline"),p(".get-started-with-kubio").eq(0).prepend(e)}),100)})(),(window.kubio=window.kubio||{}).adminArea=n})();
